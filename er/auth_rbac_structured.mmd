flowchart TB
    %% Define Styles
    classDef authClass fill:#bbdefb,stroke:#1565c0,stroke-width:2px,color:#000
    classDef orgClass fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef userClass fill:#ffe0b2,stroke:#e65100,stroke-width:2px,color:#000
    classDef contentClass fill:#f8bbd0,stroke:#c2185b,stroke-width:2px,color:#000
    classDef assessClass fill:#e1bee7,stroke:#6a1b9a,stroke-width:2px,color:#000
    classDef quizClass fill:#ffccbc,stroke:#bf360c,stroke-width:2px,color:#000
    classDef settingClass fill:#d7ccc8,stroke:#4e342e,stroke-width:2px,color:#000

    %% Authentication & RBAC Core
    subgraph AUTH["ğŸ” Authentication & RBAC"]
        direction TB
        PERM[["ğŸ“‹ Permissions<br/>â€¢ permission_id (PK)<br/>â€¢ permission_name"]]
        ROLE[["ğŸ‘¥ Roles<br/>â€¢ role_id (PK)<br/>â€¢ role_name"]]
        ROLE_PERM[["ğŸ”— Role_Permissions<br/>â€¢ role_id (FK)<br/>â€¢ permission_id (FK)"]]
        
        PERM --> ROLE_PERM
        ROLE --> ROLE_PERM
    end

    %% Organization Structure
    subgraph ORG["ğŸ¢ Organization"]
        direction TB
        COMPANY[["ğŸ­ Companies<br/>â€¢ company_id (PK)<br/>â€¢ company_name<br/>â€¢ created_at"]]
        USER_COMP[["ğŸ‘¤ User_Company<br/>â€¢ user_id (FK)<br/>â€¢ company_id (FK)<br/>â€¢ role_id (FK)<br/>â€¢ assigned_by (FK)"]]
        
        COMPANY --> USER_COMP
    end

    %% User Management
    subgraph USERS["ğŸ‘¤ User Management"]
        direction TB
        USER[["ğŸ‘¤ Users<br/>â€¢ user_id (PK)<br/>â€¢ email<br/>â€¢ created_by (FK)"]]
    end

    %% Learning Platform
    subgraph LEARN["ğŸ“š Learning Platform"]
        direction TB
        BATCH[["ğŸ“¦ Batches<br/>â€¢ batch_id (PK)<br/>â€¢ company_id (FK)<br/>â€¢ batch_name<br/>â€¢ created_by (FK)"]]
        BATCH_PART[["ğŸ‘¥ Batch_Participants<br/>â€¢ batch_id (FK)<br/>â€¢ user_id (FK)<br/>â€¢ enrolled_by (FK)"]]
        
        BATCH --> BATCH_PART
    end

    %% Assessment System
    subgraph ASSESS["ğŸ“ Assessment System"]
        direction TB
        ASSIGNMENT[["ğŸ“„ Assignments<br/>â€¢ assignment_id (PK)<br/>â€¢ tool_id (FK)"]]
        SUBMISSION[["ğŸ“¤ Submissions<br/>â€¢ submission_id (PK)<br/>â€¢ assignment_id (FK)<br/>â€¢ user_id (FK)<br/>â€¢ batch_id (FK)<br/>â€¢ graded_by (FK)"]]
        ASSESSMENT[["âœ… Assessments<br/>â€¢ assessment_id (PK)<br/>â€¢ user_id (FK)<br/>â€¢ tool_id (FK)<br/>â€¢ batch_id (FK)<br/>â€¢ test_edited_by (FK)"]]
        
        ASSIGNMENT --> SUBMISSION
    end

    %% Content Management
    subgraph CONTENT["ğŸ“‚ Content & Resources"]
        direction TB
        RESOURCE[["ğŸ“š Resources<br/>â€¢ resource_id (PK)<br/>â€¢ tool_id (FK)<br/>â€¢ created_by (FK)"]]
        RES_ACCESS[["ğŸ”“ Resource_Access<br/>â€¢ batch_id (FK)<br/>â€¢ resource_id (FK)<br/>â€¢ unlocked_by (FK)"]]
        PACKAGE[["ğŸ“¦ Assessment_Packages<br/>â€¢ package_id (PK)<br/>â€¢ company_id (FK)<br/>â€¢ tool_id (FK)<br/>â€¢ package_name"]]
        CANDIDATE[["ğŸ‘¨â€ğŸ’¼ Interview_Candidates<br/>â€¢ candidate_id (PK)<br/>â€¢ company_id (FK)<br/>â€¢ package_id (FK)<br/>â€¢ candidate_email<br/>â€¢ assigned_by (FK)"]]
        
        RESOURCE --> RES_ACCESS
        PACKAGE --> CANDIDATE
    end

    %% Quiz Module
    subgraph QUIZ["â“ Quiz System"]
        direction TB
        QUIZ_T[["ğŸ“ Quizzes<br/>â€¢ quiz_id (PK)<br/>â€¢ created_by (FK)"]]
        QUIZ_SESS[["â±ï¸ Quiz_Sessions<br/>â€¢ session_id (PK)<br/>â€¢ quiz_id (FK)<br/>â€¢ started_by (FK)"]]
        QUIZ_RESP[["âœï¸ Quiz_Responses<br/>â€¢ response_id (PK)<br/>â€¢ session_id (FK)"]]
        
        QUIZ_T --> QUIZ_SESS
        QUIZ_SESS --> QUIZ_RESP
    end

    %% System Configuration
    subgraph CONFIG["âš™ï¸ System Configuration"]
        SETTINGS[["ğŸ”§ System_Settings<br/>â€¢ setting_key (UNIQUE)<br/>â€¢ setting_value"]]
    end

    %% Main Relationships
    ROLE_PERM -.->|assigns roles| USER_COMP
    USER -->|belongs to| USER_COMP
    USER_COMP -->|organizes| BATCH
    USER -->|participates| BATCH_PART
    BATCH_PART -->|submits| SUBMISSION
    BATCH_PART -->|takes| ASSESSMENT
    BATCH_PART -->|accesses| RES_ACCESS
    COMPANY -->|creates| PACKAGE
    USER -->|creates| QUIZ_T
    USER -->|starts| QUIZ_SESS

    %% Apply Styles
    class PERM,ROLE,ROLE_PERM authClass
    class COMPANY,USER_COMP orgClass
    class USER userClass
    class BATCH,BATCH_PART contentClass
    class ASSIGNMENT,SUBMISSION,ASSESSMENT assessClass
    class RESOURCE,RES_ACCESS,PACKAGE,CANDIDATE contentClass
    class QUIZ_T,QUIZ_SESS,QUIZ_RESP quizClass
    class SETTINGS settingClass